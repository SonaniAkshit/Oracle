## ✅ What is a Function?

A **function** is a named PL/SQL block that:

* **Returns a single value**
* **Can accept input parameters**
* Can be called in **SQL statements**, **PL/SQL blocks**, or from **other procedures/functions**

---

## 🧱 Function vs Procedure

| Feature             | Function                 | Procedure       |
| ------------------- | ------------------------ | --------------- |
| Returns a value?    | ✅ Yes (using RETURN)     | ❌ Not mandatory |
| Call inside SQL?    | ✅ Yes                    | ❌ No            |
| Use in SELECT stmt? | ✅ Yes                    | ❌ No            |
| Purpose             | Compute & return a value | Perform actions |

---

## 🧾 Basic Syntax of a Function

```sql
CREATE OR REPLACE FUNCTION function_name (
    param1 datatype,
    param2 datatype
) RETURN return_datatype
IS
    -- Variable declarations (if any)
BEGIN
    -- Logic goes here
    RETURN value;
END;
/
```

---

## 🧪 Example: Create a Function to Get Discounted Price

Let's say you have a `PRODUCTS` table and want to calculate 10% discount price for a product.

### 1. Function:

```sql
CREATE OR REPLACE FUNCTION get_discounted_price (
    p_price NUMBER
) RETURN NUMBER
IS
BEGIN
    RETURN p_price * 0.90;
END;
/
```

### 2. Call Function in SQL:

```sql
SELECT p_name, price, get_discounted_price(price) AS discounted_price
FROM products;
```

---

## 🧾 Example 2: Function with IF condition

```sql
CREATE OR REPLACE FUNCTION is_in_stock (
    p_stock NUMBER
) RETURN VARCHAR2
IS
BEGIN
    IF p_stock > 0 THEN
        RETURN 'In Stock';
    ELSE
        RETURN 'Out of Stock';
    END IF;
END;
/
```

Use in query:

```sql
SELECT p_name, stock, is_in_stock(stock) AS availability
FROM products;
```

---

## 🧹 Dropping a Function

```sql
DROP FUNCTION get_discounted_price;
```

---

## 🚨 Common Errors

| Error                                        | Reason                                  |
| -------------------------------------------- | --------------------------------------- |
| `PLS-00201: identifier must be declared`     | Function doesn't exist or typo          |
| `ORA-06575: package/function is not defined` | Invalid function due to compile error   |
| `ORA-00904`                                  | Using function in SQL with wrong syntax |

---

## ✅ Summary

| Topic           | Example                                    |
| --------------- | ------------------------------------------ |
| Create Function | `CREATE FUNCTION get_price(...) RETURN...` |
| Call in SQL     | `SELECT get_price(...) FROM dual;`         |
| Drop Function   | `DROP FUNCTION get_price;`                 |
| Returns Value   | ✅ Always                                   |
| Parameters      | ✅ Optional                                 |

---
