## ‚úÖ **What is a Trigger?**

A **trigger** is a named PL/SQL block that **automatically executes** when a specific **DML event** (INSERT, UPDATE, DELETE) occurs on a **table or view**.

---

## üîß **Why Use Triggers?**

* Automatically log changes
* Enforce complex business rules
* Prevent invalid transactions
* Audit actions (who did what & when)

---

## üß± **Trigger Types**

| Type          | Fires On         | Example Use                           |
| ------------- | ---------------- | ------------------------------------- |
| BEFORE INSERT | Before inserting | Auto-fill default values              |
| AFTER UPDATE  | After update     | Log changes to audit table            |
| BEFORE DELETE | Before deletion  | Prevent deletion of critical data     |
| INSTEAD OF    | On a view        | Allow updates on complex views        |
| COMPOUND      | Multiple events  | Optimization on multiple row triggers |

---

## üìò **Example: BEFORE INSERT Trigger**

### Scenario:

We want to **log who inserted a product** and when.

```sql
CREATE OR REPLACE TRIGGER trg_before_insert_product
BEFORE INSERT ON products
FOR EACH ROW
BEGIN
    :NEW.created_by := USER;
    :NEW.created_at := SYSDATE;
END;
/
```

> Assumes your `products` table has `created_by` and `created_at` columns.

---

## üìò **Example: AFTER INSERT Trigger to Log Table**

### 1. Create a log table:

```sql
CREATE TABLE product_log (
    log_id NUMBER GENERATED ALWAYS AS IDENTITY,
    p_id NUMBER,
    action_type VARCHAR2(10),
    action_date DATE
);
```

### 2. Create the trigger:

```sql
CREATE OR REPLACE TRIGGER trg_log_product_insert
AFTER INSERT ON products
FOR EACH ROW
BEGIN
    INSERT INTO product_log (p_id, action_type, action_date)
    VALUES (:NEW.p_id, 'INSERT', SYSDATE);
END;
/
```

---

## ‚ùå **Drop a Trigger**

```sql
DROP TRIGGER trg_log_product_insert;
```

---

## üß† Notes:

* Use `:NEW.column_name` to refer to **new values**
* Use `:OLD.column_name` for **old values** (in UPDATE/DELETE)
* `BEFORE` triggers can **modify** values
* `AFTER` triggers cannot change `:NEW` values
* Triggers run **automatically**, no need to call manually

---

## ‚úÖ Summary Table

| Command        | Example                                 |
| -------------- | --------------------------------------- |
| Create Trigger | `CREATE OR REPLACE TRIGGER trg_name...` |
| Drop Trigger   | `DROP TRIGGER trg_name;`                |
| Use `:NEW`     | In INSERT/UPDATE to get new values      |
| Use `:OLD`     | In UPDATE/DELETE to get old values      |
---
