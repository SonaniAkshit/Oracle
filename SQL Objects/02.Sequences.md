# **üìå Oracle SEQUENCE**

---

## **1Ô∏è‚É£ Full Syntax**

```sql
CREATE SEQUENCE [schema.]sequence_name
    [INCREMENT BY n]        -- Step value (default: 1)
    [START WITH n]          -- First value (default: 1)
    [MAXVALUE n | NOMAXVALUE]
    [MINVALUE n | NOMINVALUE]
    [CYCLE | NOCYCLE]       -- Restart when reaching max (default: NOCYCLE)
    [CACHE n | NOCACHE]     -- Pre-allocate values for performance
    [ORDER | NOORDER];      -- Guarantee order across sessions (default: NOORDER)
```

**Other commands:**

```sql
-- Drop a sequence
DROP SEQUENCE sequence_name;

-- Change sequence properties
ALTER SEQUENCE sequence_name
    [INCREMENT BY n]
    [MAXVALUE n | NOMAXVALUE]
    [MINVALUE n | NOMINVALUE]
    [CYCLE | NOCYCLE]
    [CACHE n | NOCACHE]
    [ORDER | NOORDER];
```

**Usage in SQL:**

```sql
sequence_name.NEXTVAL   -- Get the next number
sequence_name.CURRVAL   -- Get the current number (in session)
```

---

## **1Ô∏è‚É£ Create a Sequence for `students`**

```sql
CREATE SEQUENCE student_seq
START WITH 1001
INCREMENT BY 1
NOCACHE
NOCYCLE;
```

**Explanation:**

* **`START WITH 1001`** ‚Üí first student will get ID 1001.
* **`INCREMENT BY 1`** ‚Üí increases by 1 each time.
* **`NOCACHE`** ‚Üí no pre-allocation (slightly slower but safer for learning).
* **`NOCYCLE`** ‚Üí never restarts when it reaches max.

---

## **2Ô∏è‚É£ Create a Sequence for `courses`**

```sql
CREATE SEQUENCE course_seq
START WITH 101
INCREMENT BY 1
NOCACHE
NOCYCLE;
```

---

## **3Ô∏è‚É£ Insert Using Sequence**

Instead of writing `student_id` manually:

```sql
INSERT INTO students (student_id, first_name, last_name, email, date_of_birth)
VALUES (student_seq.NEXTVAL, 'Alice', 'Johnson', 'alice.johnson@example.com', DATE '2001-04-12');

INSERT INTO courses (course_id, course_name, course_code, course_fee)
VALUES (course_seq.NEXTVAL, 'Data Science', 'DS103', 6000);

COMMIT;
```

**Key Points:**

* **`NEXTVAL`** ‚Üí gets the next number from the sequence.
* After using `NEXTVAL`, you can use `CURRVAL` in the same session to get the same number again.

---

## **4Ô∏è‚É£ View Current Values**

```sql
SELECT student_seq.CURRVAL AS current_student_id FROM dual;
SELECT course_seq.CURRVAL AS current_course_id FROM dual;
```

> ‚ö†Ô∏è `CURRVAL` will throw an error if you haven‚Äôt used `NEXTVAL` yet in that session.

---

## **5Ô∏è‚É£ Example: Using Sequence in `student_courses`**

When enrolling a student who just got inserted:

```sql
INSERT INTO student_courses (student_id, course_id)
VALUES (student_seq.CURRVAL, course_seq.CURRVAL);
```

This uses the **most recent** student and course inserted in the session.

---

## **6Ô∏è‚É£ Check All Sequences in Your Schema**

```sql
SELECT sequence_name, min_value, max_value, increment_by, last_number
FROM user_sequences;
```

---