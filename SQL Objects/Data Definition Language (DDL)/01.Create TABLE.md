## **1️⃣ Step – Create the `students` Table**

We’ll store it in the `USERS` tablespace with storage parameters.

```sql
CREATE TABLE students (
    student_id    NUMBER(5) PRIMARY KEY,
    first_name    VARCHAR2(30) NOT NULL,
    last_name     VARCHAR2(30) NOT NULL,
    email         VARCHAR2(50) UNIQUE,
    date_of_birth DATE,
    registration_date DATE DEFAULT SYSDATE
)
TABLESPACE users
STORAGE (
    INITIAL 10K
    NEXT 20K
    MINEXTENTS 1
    MAXEXTENTS 3
);
```

**Key Points:**

* **`PRIMARY KEY`** → automatically creates a **unique index**.
* **`UNIQUE`** on `email` → ensures no duplicate email addresses.
* **`DEFAULT SYSDATE`** → auto-sets registration date.
* **`TABLESPACE users`** → stores in the `USERS` tablespace.
* **`STORAGE`** clause → specifies extent sizes (useful for understanding storage growth).

---

## **2️⃣ Step – Create the `courses` Table**

We’ll also keep it in the `USERS` tablespace.

```sql
CREATE TABLE courses (
    course_id   NUMBER(5) PRIMARY KEY,
    course_name VARCHAR2(50) NOT NULL,
    course_code VARCHAR2(10) UNIQUE,
    course_fee  NUMBER(8,2) CHECK (course_fee >= 0)
)
TABLESPACE users
STORAGE (
    INITIAL 10K
    NEXT 20K
    MINEXTENTS 1
    MAXEXTENTS 3
);
```

---

## **3️⃣ Step – Create a Relationship Table (`student_courses`)**

This table links students and courses using **foreign keys**.

```sql
CREATE TABLE student_courses (
    student_id NUMBER(5),
    course_id  NUMBER(5),
    enrollment_date DATE DEFAULT SYSDATE,
    CONSTRAINT pk_student_courses PRIMARY KEY (student_id, course_id),
    CONSTRAINT fk_student FOREIGN KEY (student_id) REFERENCES students(student_id),
    CONSTRAINT fk_course FOREIGN KEY (course_id) REFERENCES courses(course_id)
)
TABLESPACE users
STORAGE (
    INITIAL 50K
    NEXT 50K
    MINEXTENTS 1
    MAXEXTENTS 5
);
```

**Key Points:**

* Composite **primary key**: `(student_id, course_id)` ensures no student can enroll in the same course twice.
* **Foreign keys**: Maintain referential integrity.

---

## **4️⃣ Step – Verify Tables & Tablespaces**

```sql
SELECT table_name, tablespace_name
FROM user_tables
WHERE table_name IN ('STUDENTS', 'COURSES', 'STUDENT_COURSES');
```

---

## **5️⃣ Step – Insert Sample Data**

```sql
-- Students
INSERT INTO students (student_id, first_name, last_name, email, date_of_birth)
VALUES (1001, 'John', 'Doe', 'john.doe@example.com', DATE '2000-05-15');

INSERT INTO students (student_id, first_name, last_name, email, date_of_birth)
VALUES (1002, 'Jane', 'Smith', 'jane.smith@example.com', DATE '1999-09-20');

-- Courses
INSERT INTO courses (course_id, course_name, course_code, course_fee)
VALUES (101, 'Database Systems', 'DB101', 5000);

INSERT INTO courses (course_id, course_name, course_code, course_fee)
VALUES (102, 'Web Development', 'WD102', 4000);

-- Enrollments
INSERT INTO student_courses (student_id, course_id)
VALUES (1001, 101);

INSERT INTO student_courses (student_id, course_id)
VALUES (1002, 102);

COMMIT;
```

---

## **6️⃣ Step – Query with Joins**

```sql
SELECT s.first_name || ' ' || s.last_name AS student_name,
       c.course_name,
       sc.enrollment_date
FROM student_courses sc
JOIN students s ON sc.student_id = s.student_id
JOIN courses c ON sc.course_id = c.course_id;
```

**What This Shows:**

* Inner join between all three tables.
* Concatenated student name.
* Enrollment date.

---

## **7️⃣ Step – Storage Insights**

To check where these tables are stored and how much space they use:

```sql
SELECT segment_name, segment_type, tablespace_name, bytes/1024 AS size_kb
FROM user_segments
WHERE segment_name IN ('STUDENTS', 'COURSES', 'STUDENT_COURSES');
```

---