## ‚úÖ **What Are User-Defined Types in Oracle?**

User-Defined Types (UDTs) let you define **custom data structures**, like **classes** in programming.

They can be:

* **Object Types** ‚Äì like a class (fields + methods)
* **VARRAYs** ‚Äì variable-size arrays
* **Nested Tables** ‚Äì like arrays, but more flexible

---

## üìå 1. üîπ Object Types

---

### üß± Syntax: `CREATE TYPE`

```sql
CREATE TYPE product_type AS OBJECT (
    p_id NUMBER,
    p_name VARCHAR2(100),
    price NUMBER(10,2)
);
```

This defines a **custom object structure** `product_type`.

---

### ‚úÖ Example: Object Table from UDT

```sql
CREATE TABLE product_obj_table OF product_type (
    PRIMARY KEY (p_id)
)
OBJECT IDENTIFIER IS PRIMARY KEY;
```

Now `product_obj_table` is a **table that stores product\_type objects**.

---

### üîç Insert into Object Table

```sql
INSERT INTO product_obj_table VALUES (
    product_type(101, 'Laptop', 50000)
);
```

### üîç Select from Object Table

```sql
SELECT * FROM product_obj_table;
```

---

## üìå 2. üîπ VARRAY

---

### ‚úÖ What is a VARRAY?

A **VARRAY** is a user-defined array type with a **fixed maximum size**.

### üß± Create VARRAY Type:

```sql
CREATE TYPE rating_array AS VARRAY(5) OF NUMBER(2);
```

### üß± Use in a Table:

```sql
CREATE TABLE product_reviews (
    p_id NUMBER PRIMARY KEY,
    ratings rating_array
);
```

### üîç Insert:

```sql
INSERT INTO product_reviews VALUES (
    101,
    rating_array(5, 4, 3)
);
```

### üîç Query:

```sql
SELECT * FROM product_reviews;
```

---

## üìå 3. üîπ Nested Table

---

### ‚úÖ What is a Nested Table?

A **Nested Table** is like a relational table inside a column ‚Äì more flexible than VARRAY.

### üß± Create Nested Table Type:

```sql
CREATE TYPE tag_list AS TABLE OF VARCHAR2(30);
```

### üß± Use in Table:

```sql
CREATE TABLE product_tags (
    p_id NUMBER PRIMARY KEY,
    tags tag_list
)
NESTED TABLE tags STORE AS tags_nt;
```

Here, `tags_nt` is a **storage table** for the nested collection.

---

### üîç Insert:

```sql
INSERT INTO product_tags VALUES (
    101,
    tag_list('Electronics', 'New', 'Popular')
);
```

---

### üîç Query Nested Table (Unnesting):

```sql
SELECT p.p_id, COLUMN_VALUE AS tag
FROM product_tags p,
     TABLE(p.tags);
```

---

## ‚úÖ Summary Table

| Feature      | Syntax Example                         | Use Case                     |
| ------------ | -------------------------------------- | ---------------------------- |
| Object Type  | `CREATE TYPE AS OBJECT`                | Model custom entities        |
| Object Table | `CREATE TABLE OF TYPE`                 | Store full objects           |
| VARRAY       | `CREATE TYPE ... AS VARRAY(n)`         | Fixed-size list of values    |
| Nested Table | `CREATE TYPE ... AS TABLE OF`          | Flexible multi-valued column |
| Unnest Query | `SELECT ... FROM TABLE(nested_column)` | Query individual values      |

---

## üîê Object Identifier

```sql
OBJECT IDENTIFIER IS PRIMARY KEY
```

Used in object tables to uniquely identify each object using a field (like `p_id`).

---

## üß† Key Benefits of Object Types

| Advantage        | Description                                   |
| ---------------- | --------------------------------------------- |
| Reusability      | Define once, use in multiple tables           |
| Complex modeling | Suitable for hierarchical / composite data    |
| Extensibility    | Add methods and encapsulate behavior (PL/SQL) |

---
