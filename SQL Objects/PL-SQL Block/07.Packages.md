# **üì¶ Packages in PL/SQL**

---

### **1Ô∏è‚É£ What is a Package?**

A **package** is a **collection of logically related PL/SQL objects** grouped together under a single name.
It usually contains:

* **Procedures**
* **Functions**
* **Cursors**
* **Variables**
* **Constants**
* **Exception handlers**
* **Types** (records, tables, etc.)

Think of it like a **folder** that organizes related PL/SQL code for better management.

---

### **2Ô∏è‚É£ Why use Packages?**

Packages help:

* **Organize code** (group related procedures/functions in one place)
* **Encapsulate business logic** (hide internal details)
* **Improve performance** (loaded into memory once per session)
* **Enable modular programming** (easier maintenance)

---

### **3Ô∏è‚É£ Package Structure**

A package has **two parts**:

#### **A. Package Specification** (Public Interface)

* Declares variables, constants, cursors, exceptions, and the **signatures** of functions and procedures.
* Defines what‚Äôs accessible to users/programs.

```sql
CREATE OR REPLACE PACKAGE emp_pkg AS
    -- Public variable
    g_company_name VARCHAR2(50) := 'TechCorp';

    -- Procedure declaration
    PROCEDURE add_employee(p_id NUMBER, p_name VARCHAR2);

    -- Function declaration
    FUNCTION get_employee_name(p_id NUMBER) RETURN VARCHAR2;
END emp_pkg;
/
```

---

#### **B. Package Body** (Implementation)

* Contains the **actual code** for the procedures, functions, and cursors declared in the spec.
* Can also contain private elements not mentioned in the specification.

```sql
CREATE OR REPLACE PACKAGE BODY emp_pkg AS

    PROCEDURE add_employee(p_id NUMBER, p_name VARCHAR2) IS
    BEGIN
        INSERT INTO employees (emp_id, emp_name)
        VALUES (p_id, p_name);
    END add_employee;

    FUNCTION get_employee_name(p_id NUMBER) RETURN VARCHAR2 IS
        v_name VARCHAR2(50);
    BEGIN
        SELECT emp_name INTO v_name
        FROM employees
        WHERE emp_id = p_id;

        RETURN v_name;
    END get_employee_name;

END emp_pkg;
/
```

---

### **4Ô∏è‚É£ Using a Package**

```sql
BEGIN
    emp_pkg.add_employee(101, 'John Doe');
    DBMS_OUTPUT.PUT_LINE('Employee Name: ' || emp_pkg.get_employee_name(101));
END;
/
```

---

### **5Ô∏è‚É£ Key Features**

* **Public vs. Private Members**:

  * Items declared in the **specification** are public.
  * Items declared only in the **body** are private.
* **Overloading**: Can have multiple procedures/functions with the same name but different parameter lists.
* **State persistence**: Variables in packages retain values for the duration of the user session.
* **Better performance**: The whole package is loaded into memory the first time it‚Äôs called, reducing parsing overhead.

---

### **6Ô∏è‚É£ Real-World Example**

#### Payroll System Package

* Spec contains:

  * `add_employee`
  * `calculate_salary`
  * `generate_payslip`
* Body contains:

  * Internal helper functions (private)
  * Complex business logic

---

### **7Ô∏è‚É£ Advantages**

‚úÖ **Code Organization** ‚Äì Related logic is grouped together.
‚úÖ **Encapsulation** ‚Äì Hide internal logic and expose only the interface.
‚úÖ **Performance** ‚Äì Loaded once per session.
‚úÖ **Easier Maintenance** ‚Äì Change package body without touching the specification.

---