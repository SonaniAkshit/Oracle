# **üìå Functions in PL/SQL**

---

### **1Ô∏è‚É£ What is a Function?**

A **Function** in PL/SQL is a **named block of code** that:

* Accepts **input parameters**.
* **Performs some processing**.
* **Must return a single value** using the `RETURN` keyword.

It‚Äôs like a **procedure**, but the **key difference**:

* **Procedure** ‚Üí does *not* have to return a value.
* **Function** ‚Üí *must* return exactly one value.

---

### **2Ô∏è‚É£ Why use Functions?**

* Code reusability (write once, use many times).
* Simplifies complex queries.
* Can be called inside:

  * PL/SQL blocks
  * SQL queries (if the function is **deterministic** and doesn‚Äôt modify data)
  * Other functions or procedures.

---

### **3Ô∏è‚É£ Function Syntax**

```sql
CREATE [OR REPLACE] FUNCTION function_name
(
    parameter1 datatype,
    parameter2 datatype DEFAULT default_value
)
RETURN return_datatype
IS | AS
    -- Variable declarations
BEGIN
    -- Logic / processing
    RETURN some_value;  -- Must be of return_datatype
EXCEPTION
    -- Optional exception handling
    WHEN others THEN
        RETURN null; -- or handle the error
END function_name;
/
```

---

### **4Ô∏è‚É£ Example: Simple Function**

```sql
CREATE OR REPLACE FUNCTION get_total_marks(
    p_math   NUMBER,
    p_science NUMBER
)
RETURN NUMBER
IS
    v_total NUMBER;
BEGIN
    v_total := p_math + p_science;
    RETURN v_total;
END;
/

-- Calling in PL/SQL
DECLARE
    v_result NUMBER;
BEGIN
    v_result := get_total_marks(85, 90);
    DBMS_OUTPUT.PUT_LINE('Total Marks = ' || v_result);
END;
/

-- Calling in SQL
SELECT get_total_marks(85, 90) AS total_marks FROM dual;
```

---

### **5Ô∏è‚É£ Example: Function with Table Query**

```sql
CREATE OR REPLACE FUNCTION get_student_name(
    p_id NUMBER
)
RETURN VARCHAR2
IS
    v_name VARCHAR2(100);
BEGIN
    SELECT name INTO v_name
    FROM students
    WHERE student_id = p_id;

    RETURN v_name;
END;
/

-- Call inside SQL
SELECT get_student_name(1) AS student FROM dual;
```

---

### **6Ô∏è‚É£ Important Points**

* **Must return exactly one value**.
* **Return type** can be `NUMBER`, `VARCHAR2`, `DATE`, `BOOLEAN` (only in PL/SQL, not SQL), etc.
* Can have `IN`, `OUT`, and `IN OUT` parameters ‚Äî but typically only `IN` is used in SQL functions.
* If you want to call it in a SQL query, it **must not** modify database state (no `INSERT`, `UPDATE`, `DELETE`).

---

### **7Ô∏è‚É£ Advantages**

* Modular, reusable code.
* Centralizes business logic.
* Can be used in both **SQL** and **PL/SQL**.

---

### **8Ô∏è‚É£ When NOT to use Functions**

* When you need to return multiple values (use Procedures or Packages).
* When you need to modify data (use Procedures).
* When performance in SQL is critical ‚Äî functions in SQL can be called row-by-row.

---