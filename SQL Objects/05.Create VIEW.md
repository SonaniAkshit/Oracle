## ✅ **What is a View in Oracle SQL?**

A **view** is a **virtual table** based on the result of a SQL query. It doesn't store data but presents data from one or more tables.

* Helps **simplify complex queries**
* Provides **security** (hide sensitive columns)
* Supports **reusability**

---

## 🧱 **Basic Syntax: CREATE VIEW**

```sql
CREATE VIEW view_name AS
SELECT column1, column2
FROM table_name
WHERE condition;
```

---

## 📘 **Example: Basic View on `products` Table**

```sql
CREATE VIEW view_available_products AS
SELECT p_id, p_name, price, stock
FROM products
WHERE stock > 0;
```

Now you can use:

```sql
SELECT * FROM view_available_products;
```

---

## 🔒 **WITH CHECK OPTION**

Ensures **insert/update** via the view only affects rows that **meet the view’s WHERE condition**.

```sql
CREATE VIEW view_limited_products AS
SELECT * FROM products
WHERE price < 5000
WITH CHECK OPTION;
```

### 🔍 Behavior:

```sql
-- This works
INSERT INTO view_limited_products (p_id, p_name, price, stock)
VALUES (2001, 'Pen Drive', 400, 50);

-- ❌ This fails (price ≥ 5000 not allowed)
INSERT INTO view_limited_products (p_id, p_name, price, stock)
VALUES (2002, 'Smartphone', 15000, 20);
```

---

## 🛑 **READ ONLY View**

Prevents **any DML** (INSERT, UPDATE, DELETE) on the view.

```sql
CREATE VIEW view_readonly_products AS
SELECT p_id, p_name
FROM products
WITH READ ONLY;
```

Attempting to insert:

```sql
INSERT INTO view_readonly_products VALUES (999, 'Test');
-- ❌ Error: view is read-only
```

---

## 🔁 **Materialized Views** (Advanced)

A **materialized view** is like a view but **stores the result set physically**.

* Good for **performance**
* Useful in **data warehousing**
* Can be **refreshed** on demand or automatically

### 🔧 Example:

```sql
CREATE MATERIALIZED VIEW mv_total_stock
BUILD IMMEDIATE
REFRESH FAST ON COMMIT
AS
SELECT SUM(stock) AS total_stock
FROM products;
```

### 🔍 Key Options:

| Option              | Meaning                                   |
| ------------------- | ----------------------------------------- |
| `BUILD IMMEDIATE`   | Create and populate immediately           |
| `REFRESH FAST`      | Incremental update using logs             |
| `REFRESH ON COMMIT` | Refresh after each transaction            |
| `REFRESH ON DEMAND` | Manual refresh using `DBMS_MVIEW.REFRESH` |

---

## 🧹 **Drop Views**

### 🔻 Drop normal view:

```sql
DROP VIEW view_available_products;
```

### 🔻 Drop materialized view:

```sql
DROP MATERIALIZED VIEW mv_total_stock;
```

---

## ✅ Summary Table

| View Type         | Syntax Example                         | Use Case                                     |
| ----------------- | -------------------------------------- | -------------------------------------------- |
| Normal View       | `CREATE VIEW view_name AS SELECT ...;` | Simplify queries                             |
| CHECK OPTION      | `... WHERE ... WITH CHECK OPTION;`     | Restrict updates via the view                |
| READ ONLY         | `... WITH READ ONLY;`                  | Prevent updates through the view             |
| Materialized View | `CREATE MATERIALIZED VIEW ...`         | Precomputed, physical result for performance |

---
