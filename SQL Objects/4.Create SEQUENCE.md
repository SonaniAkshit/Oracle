## ‚úÖ **What Is a Sequence?**

A **sequence** is a database object that generates a series of unique numbers. It‚Äôs mostly used to populate primary key columns automatically.

* You retrieve values using:

  * `sequence_name.NEXTVAL` ‚Äì gets the **next** number in the sequence.
  * `sequence_name.CURRVAL` ‚Äì gets the **current** value in your session.

---

## üß± **CREATE SEQUENCE Syntax + Example**

```sql
CREATE SEQUENCE product_seq
    START WITH 1         
    INCREMENT BY 1       
    MAXVALUE 20;
```

### üîç Explanation of Options:

| Option         | Meaning                                                       |
| -------------- | ------------------------------------------------------------- |
| `START WITH`   | The first number the sequence will generate                   |
| `INCREMENT BY` | How much to add to the last value each time                   |
| `CACHE`        | How many numbers to store in memory for faster access         |
| `CYCLE`        | Allows restarting from `START WITH` after reaching `MAXVALUE` |
| `NOMAXVALUE`   | No upper limit (unless you set one manually using `MAXVALUE`) |
| `NOCYCLE`      | (default) ‚Äì error if sequence exceeds its `MAXVALUE`          |

---

## üîß **Using the Sequence**

### 1. Insert with `NEXTVAL` into `products`:

**method 1**
```sql
INSERT INTO products (p_id, p_name, price, stock)
VALUES (product_seq.NEXTVAL, 'Laptop', 45000, 10);
```

**method 2**
```sql
insert into products 
values(product_seq.nextval,'&p_name',&price,&stock);
```

### 2. Get current value in session:

```sql
SELECT product_seq.CURRVAL FROM dual;
```

> ‚ö†Ô∏è `CURRVAL` only works **after** `NEXTVAL` has been called in the session.

---

## ‚úèÔ∏è **ALTER SEQUENCE Example**

```sql
ALTER SEQUENCE product_seq
    INCREMENT BY 5
    MAXVALUE 99999
    NOCYCLE;
```

---

## ‚ùå **DROP SEQUENCE**

```sql
DROP SEQUENCE product_seq;
```

---

## ‚úÖ Use Case: Automatically Generate Primary Key

If you don‚Äôt want users to manually enter `p_id`, create a **BEFORE INSERT trigger**:

```sql
CREATE OR REPLACE TRIGGER trg_products_bi
BEFORE INSERT ON products
FOR EACH ROW
BEGIN
    SELECT product_seq.NEXTVAL
    INTO :new.p_id
    FROM dual;
END;
```

This way, even if the user doesn‚Äôt pass a `p_id`, it will be generated automatically.

---

## ‚úÖ Summary Table

| Task              | Code Example                      |
| ----------------- | --------------------------------- |
| Create Sequence   | `CREATE SEQUENCE product_seq ...` |
| Get next value    | `product_seq.NEXTVAL`             |
| Get current value | `product_seq.CURRVAL`             |
| Alter Sequence    | `ALTER SEQUENCE product_seq ...`  |
| Drop Sequence     | `DROP SEQUENCE product_seq`       |

---
